{% extends "/projects/project_card.html" %}

{% block requirement %}
<form action="{{ url_for('requirements.save_requirement') }}" method="post">
    {{ form.hidden_tag() }}
    <div class="form-row">
        <div class="form-group col-md-12">
            <div class="form-row">
                <div class="form-group col-md-6">
                        {{ form.name.label }}
                        {{ form.name() }}
                </div>
                <div class="form-group col-md-3">
                        {{ form.type.label }}
                        {{ form.type() }}
                </div>
                <div class="form-group col-md-3">
                        {{ form.priority.label }}
                        {{ form.priority() }}
                </div>
            </div>
                <br>
            <div class="form-row">
                    {{ form.description() }}
            </div>
            <div>
                {{ form.submit }}
                <input class="btn btn-primary" id="new" name="new" type="submit" value="Новое" onclick="new_requirement()">
                <input class="btn btn-success" id="Accept" name="Accept" type="submit" value="Одобрить" onclick="accept_requirement()">
            </div>
        </div>
    </div>
</form>
<script src="{{ url_for('static', filename='/js/build_requirements_list.js') }}"></script>
</form>
<script>
      fetch('/requirements/requirement_doc/' + document.getElementById('project_id').value).then(function(response) {
        response.json().then(function(data) {
            let requirement_doc = document.getElementById('requirement_doc');
            let doc_HTML = data.requirement_doc != '' ? data.requirement_doc : '';
            requirement_doc.innerHTML = doc_HTML;
        });
    });
</script>
{% endblock %}